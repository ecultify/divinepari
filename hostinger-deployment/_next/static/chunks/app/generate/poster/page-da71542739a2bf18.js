(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[832],{2099:(e,t,r)=>{"use strict";r.d(t,{MH:()=>p,Pn:()=>s,Vh:()=>o,ai:()=>m,f6:()=>l,pR:()=>i,ps:()=>a});let n=(0,r(4982).UU)("https://nuoizrqsnxoldzcvwszu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im51b2l6cnFzbnhvbGR6Y3Z3c3p1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNTAwOTAsImV4cCI6MjA2NTgyNjA5MH0.QBqYuv2uxdNiakLzrW_CosJnN0vTvTwlGT2UvAZFYlY"),a=async e=>{try{let{data:t,error:r}=await n.from("user_sessions").insert([{session_id:e}]).select();if(r)throw r;return t}catch(e){return console.error("Error tracking user session:",e),null}},s=async(e,t,r)=>{try{let{data:a,error:s}=await n.from("user_journey").insert([{session_id:e,step:t,data:r,timestamp:new Date().toISOString()}]).select();if(s)throw s;return a}catch(e){return console.error("Error tracking user step:",e),null}},o=async(e,t)=>{try{let{data:r,error:a}=await n.from("generation_results").insert([{session_id:e,...t,created_at:new Date().toISOString()}]).select();if(a)throw a;return r}catch(e){return console.error("Error tracking generation result:",e),null}},i=async(e,t)=>{try{let{data:r,error:a}=await n.from("generation_results").update(t).eq("session_id",e).select();if(a)throw a;return r}catch(e){return console.error("Error updating generation result:",e),null}},l=()=>"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),c=async(e,t,r)=>{try{let a="user_photo"===r?"user-photos":"generated-posters",s=e instanceof File?e.name.split(".").pop():"jpg",o="".concat(t,"_").concat(Date.now(),".").concat(s),i="".concat(r,"/").concat(o),{data:l,error:c}=await n.storage.from(a).upload(i,e);if(c)return console.error("Error uploading image:",c),null;let{data:{publicUrl:d}}=n.storage.from(a).getPublicUrl(i);return{url:d,path:i}}catch(e){return console.error("Error in uploadImageToStorage:",e),null}},d=async(e,t,r,a,s,o)=>{try{let i={session_id:e,image_type:t,original_filename:o||(s instanceof File?s.name:void 0),storage_path:r,storage_url:a,file_size:null==s?void 0:s.size,mime_type:null==s?void 0:s.type,upload_status:"uploaded"},{data:l,error:c}=await n.from("image_storage").insert([i]).select();if(c)throw c;return l}catch(e){return console.error("Error tracking image storage:",e),null}},u=e=>{let t=e.replace(/^data:image\/[a-z]+;base64,/,""),r=window.atob(t),n=new Uint8Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return new Blob([n],{type:"image/jpeg"})},m=async(e,t,r,n)=>{try{let a=u(e),s=await c(a,t,r);return s&&await d(t,r,s.path,s.url,a,n),s}catch(e){return console.error("Error uploading base64 image:",e),null}},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generated_poster",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"direct_download";try{let a={session_id:e,image_type:t,download_method:r,user_agent:"undefined"!=typeof navigator?navigator.userAgent:void 0},{data:s,error:o}=await n.from("download_tracking").insert([a]).select();if(o)throw o;return s}catch(e){return console.error("Error tracking download:",e),null}}},3466:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(5155),a=r(2115),s=r(5695),o=r(2099);function i(){let e=(0,s.useSearchParams)(),t=(0,s.useRouter)(),r=e.get("gender"),[i,l]=(0,a.useState)(null),[c,d]=(0,a.useState)("");(0,a.useEffect)(()=>{if(!r)return void t.push("/generate/gender");(async()=>{let e=localStorage.getItem("sessionId")||"";d(e),e&&await (0,o.Pn)(e,"poster_selection",{page:"poster_selection",gender:r,timestamp:new Date().toISOString()})})()},[r,t]);let u="male"===r?["Option 1M.jpg","Option 2M.jpg","Option 3M.jpg"]:["Option 1F.jpg","Option 2F.jpg","Option 3F.jpg"],m=async e=>{l(e),c&&await (0,o.Pn)(c,"poster_selection",{selected_poster:e,gender:r,action:"poster_selected",timestamp:new Date().toISOString()})},p=async()=>{i&&r&&c&&(await (0,o.Pn)(c,"poster_selection",{selected_poster:i,gender:r,action:"submit_poster",next_page:"photo_upload",timestamp:new Date().toISOString()}),localStorage.setItem("selectedPoster",i),t.push("/generate/upload?gender=".concat(r,"&poster=").concat(encodeURIComponent(i))))};return(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)("section",{className:"relative w-full bg-no-repeat bg-center min-h-screen flex items-center justify-center",style:{backgroundImage:"url('/images/secondpage/Desktop.png')",backgroundSize:"cover"},children:[(0,n.jsx)("div",{className:"absolute inset-0 block md:hidden bg-no-repeat bg-center",style:{backgroundImage:"url('/images/mobile/mobile.png')",backgroundSize:"cover"}}),(0,n.jsxs)("div",{className:"relative z-10 w-full max-w-md md:max-w-none mx-auto flex flex-col px-4 md:px-6 py-6",children:[(0,n.jsx)("div",{className:"flex justify-center md:justify-start mb-8 w-full",children:(0,n.jsx)("button",{onClick:()=>window.location.href="/",className:"transition-all duration-200 hover:opacity-80",children:(0,n.jsx)("img",{src:"/images/landing/normalimages/parimatch.svg",alt:"Parimatch Logo",className:"h-16 md:h-16"})})}),(0,n.jsx)("div",{className:"flex justify-center mb-4 md:mb-6",children:(0,n.jsx)("div",{className:"flex items-center",children:[1,2,3,4].map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-8 h-8 md:w-8 md:h-8 rounded-full border-2 flex items-center justify-center font-bold font-poppins text-sm md:text-sm",style:{borderColor:1===e||2===e?"#F8FF13":"white",backgroundColor:1===e||2===e?"#F8FF13":"transparent",color:1===e||2===e?"black":"white"},children:e}),t<3&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-2 md:w-2"}),(0,n.jsx)("div",{className:"w-8 md:w-8 h-0.5 bg-white"}),(0,n.jsx)("div",{className:"w-2 md:w-2"})]})]},e))})}),(0,n.jsx)("div",{className:"flex justify-center items-center flex-1 px-2",children:(0,n.jsxs)("div",{className:"w-full max-w-2xl px-6 md:px-12 py-8 rounded-lg relative mx-auto",style:{border:"2px solid transparent",backgroundImage:"linear-gradient(#111112, #111112), linear-gradient(45deg, #8F9093, #C0C4C8, #BDBDBD, #959FA7, #666666)",backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box"},children:[(0,n.jsx)("button",{onClick:()=>window.location.href="/generate/gender",className:"absolute top-4 left-4 transition-all duration-200 hover:opacity-75",children:(0,n.jsx)("img",{src:"/images/icons/backbutton.png",alt:"Back",className:"w-8 h-8"})}),(0,n.jsx)("h2",{className:"text-white text-lg md:text-xl font-medium text-center mb-6 font-poppins",children:"Select your scene"}),(0,n.jsx)("div",{className:"flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-6 mb-8",children:u.map((e,t)=>(0,n.jsx)("button",{onClick:()=>m(e),className:"relative transition-all duration-200 hover:scale-105",style:{border:i===e?"3px solid #F8FF13":"3px solid transparent",borderRadius:"8px",padding:"4px"},children:(0,n.jsx)("img",{src:"/images/posters/".concat(e),alt:"Poster ".concat(t+1),className:"w-32 h-48 md:w-40 md:h-60 object-cover rounded"})},e))}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{onClick:p,disabled:!i,className:"px-16 py-3 font-normal text-lg uppercase tracking-wide transform -skew-x-12 transition-all duration-200 font-poppins",style:{background:i?"#F8FF13":"#585858",color:"black",border:i?"0.5px solid transparent":"none",backgroundImage:i?"linear-gradient(#F8FF13, #F8FF13), linear-gradient(45deg, #8F9093, #C0C4C8, #BDBDBD, #959FA7, #666666)":"none",backgroundOrigin:i?"border-box":"initial",backgroundClip:i?"padding-box, border-box":"initial",cursor:i?"pointer":"not-allowed",opacity:i?1:.7},children:(0,n.jsx)("span",{className:"block transform skew-x-12",children:"SUBMIT"})})})]})})]})]})})}function l(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(i,{})})}},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},6380:(e,t,r)=>{Promise.resolve().then(r.bind(r,3466))}},e=>{var t=t=>e(e.s=t);e.O(0,[982,441,684,358],()=>t(6380)),_N_E=e.O()}]);